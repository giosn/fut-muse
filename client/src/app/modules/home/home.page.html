<div class="main-container">

    <div class="search">
        <mat-form-field appearance="fill">
            <mat-label>Search player</mat-label>
            <input
                matInput
                [formControl]="playerName"
                [matAutocomplete]="autoComplete"/>
                <mat-autocomplete
                    #autoComplete="matAutocomplete"
                    autoActiveFirstOption>
                    <mat-option
                        *ngIf="isSearching && playerName.value.length > 0"
                        disabled>
                        <mat-progress-bar mode="indeterminate"></mat-progress-bar>
                    </mat-option>
                    <div *ngIf="(search$ | async) as search">
                        <div *ngIf="!isSearching">
                            <mat-option
                                *ngIf="playerName.value.length >= 3 && search.hits.length === 0"
                                disabled>
                                No players found
                            </mat-option>
                            <div *ngIf="playerName.value.length >= 3">
                                <a
                                    *ngFor="let hit of search.hits.slice(0, 5)"
                                    routerLink="player/{{hit.tmId}}">
                                    <mat-option [value]="playerName.value">
                                        {{hit.name}}
                                    </mat-option>
                                </a>
                            </div>
                            <div *ngIf="search.extendedSearchAvailable">
                                <mat-option
                                    [value]="playerName.value"
                                    class="extended"
                                    (click)="navigateToSearchPage(search.totalHits, search.hits)">
                                    <mat-icon>search</mat-icon>
                                    <span>View all results for "{{playerName.value}}"</span>
                                </mat-option>
                            </div>
                        </div>
                    </div>
                </mat-autocomplete>
        </mat-form-field>
    </div>
    
</div>